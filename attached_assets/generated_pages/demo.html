<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate, max-age=0, s-maxage=0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>ScheduleFlow - Live Demo Player</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: #000000;
            color: #00ff00;
            overflow-x: hidden;
        }

        .top-nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: #000000;
            border-bottom: 2px solid rgba(0, 255, 0, 0.3);
            padding: 12px 20px;
            z-index: 10000;
            backdrop-filter: blur(10px);
        }

        .nav-container {
            max-width: 1600px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-logo {
            color: #00ff00;
            font-weight: bold;
            font-size: 1.2em;
            text-decoration: none;
        }

        .nav-logo:hover {
            color: #ffff00;
        }

        .nav-links {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .nav-links a {
            color: #00ff00;
            text-decoration: none;
            font-size: 0.9em;
            padding: 6px 12px;
            border-radius: 4px;
            transition: all 0.3s;
        }

        .nav-links a:hover {
            background: rgba(0, 255, 0, 0.2);
        }

        .nav-links a.active {
            color: #00ff00;
            border-bottom: 2px solid #00ff00;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 80px 20px 30px 20px;
        }

        .demo-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .demo-title {
            font-size: 2.5em;
            font-weight: bold;
            background: linear-gradient(135deg, #00ff00, #ffff00);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 15px;
        }

        .demo-subtitle {
            font-size: 1.1em;
            color: #ffff00;
            margin-bottom: 10px;
        }

        .demo-status {
            color: #00ff00;
            font-size: 0.95em;
            margin-bottom: 30px;
        }

        .player-section {
            background: #000000;
            border: 2px solid rgba(0, 255, 0, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .player-wrapper {
            position: relative;
            width: 100%;
            padding-bottom: 56.25%;
            background: #000;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 20px;
            box-shadow: 0 0 30px rgba(0, 255, 0, 0.2);
        }

        .player-video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        video {
            width: 100%;
            height: 100%;
            background: #000;
        }

        .loading, .error {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #00ff00;
            font-size: 1.2em;
            text-align: center;
            padding: 20px;
        }

        .error {
            color: #ff6b6b;
        }

        .player-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            font-size: 0.95em;
        }

        .btn-primary {
            background: linear-gradient(135deg, #00ff00, #ffff00);
            color: #000;
        }

        .btn-primary:hover {
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.5);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: rgba(0, 255, 0, 0.2);
            color: #00ff00;
            border: 1px solid rgba(0, 255, 0, 0.3);
        }

        .btn-secondary:hover {
            background: rgba(0, 255, 0, 0.3);
        }

        .player-info {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .info-card {
            background: rgba(0, 255, 0, 0.05);
            border: 1px solid rgba(0, 255, 0, 0.2);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }

        .info-label {
            color: #ffff00;
            font-size: 0.85em;
            margin-bottom: 5px;
        }

        .info-value {
            color: #00ff00;
            font-size: 1.3em;
            font-weight: bold;
            font-family: monospace;
        }

        .demo-notice {
            background: rgba(0, 255, 0, 0.1);
            border: 2px solid rgba(0, 255, 0, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            color: #00ff00;
            text-align: center;
        }

        .features-section {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }

        .feature-item {
            background: #000000;
            border: 1px solid rgba(0, 255, 0, 0.3);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }

        .feature-icon {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .feature-name {
            color: #00ff00;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .feature-desc {
            font-size: 0.85em;
            color: #ffff00;
        }

        @media (max-width: 1200px) {
            .features-section {
                grid-template-columns: repeat(2, 1fr);
            }
            .player-info {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .demo-title {
                font-size: 1.8em;
            }
            .features-section {
                grid-template-columns: 1fr;
            }
            .player-info {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <nav class="top-nav">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">üé¨ ScheduleFlow</a>
            <div class="nav-links">
                <a href="index.html">Home</a>
                <a href="m3u_scheduler.html">Scheduler</a>
                <a href="minified_player.html">Player</a>
                <a href="interactive_hub.html">Dashboard</a>
                <a href="file_manager.html">File Manager</a>
                <a href="demo.html" class="active">Demo</a>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="demo-header">
            <h1 class="demo-title">üé¨ ScheduleFlow Demo Player</h1>
            <p class="demo-subtitle">Watch auto-rotating 5-minute clips from embedded priority shows</p>
            <div class="demo-status">
                ‚ñ∂Ô∏è <span id="statusText">Ready to play demo</span>
            </div>
        </div>

        <div class="demo-notice">
            üí° This demo automatically plays random 5-minute clips rotating between 3 embedded shows. Click Play to start - no playlist selection needed!
        </div>

        <div class="player-section">
            <div class="player-wrapper">
                <div class="player-video">
                    <video id="videoPlayer" crossorigin="anonymous" controls style="width:100%; height:100%;"></video>
                    <div class="loading" id="loadingIndicator" style="display:none;">Loading clip...</div>
                    <div class="error" id="errorIndicator" style="display:none;"></div>
                </div>
            </div>

            <div class="player-controls">
                <button class="btn btn-primary" id="playBtn">‚ñ∂Ô∏è Play Demo</button>
                <button class="btn btn-secondary" id="pauseBtn">‚è∏Ô∏è Pause</button>
                <button class="btn btn-secondary" id="nextBtn">‚è≠Ô∏è Next 5min Clip</button>
                <button class="btn btn-secondary" id="fullscreenBtn">‚õ∂ Fullscreen</button>
            </div>

            <div class="player-info">
                <div class="info-card">
                    <div class="info-label">Current Show</div>
                    <div class="info-value" id="currentShow">‚Äî</div>
                </div>
                <div class="info-card">
                    <div class="info-label">Clip Duration</div>
                    <div class="info-value">5:00</div>
                </div>
                <div class="info-card">
                    <div class="info-label">Clips Played</div>
                    <div class="info-value" id="clipsPlayed">0</div>
                </div>
                <div class="info-card">
                    <div class="info-label">Next Show</div>
                    <div class="info-value" id="nextShowDisplay">‚Äî</div>
                </div>
            </div>
        </div>

        <h2 style="color: #00ff00; margin: 40px 0 20px 0; font-size: 1.5em;">üéØ Demo Features</h2>
        <div class="features-section">
            <div class="feature-item">
                <div class="feature-icon">üé≤</div>
                <div class="feature-name">Random 5min Clips</div>
                <div class="feature-desc">Each segment plays a random 5-minute clip from the show.</div>
            </div>
            <div class="feature-item">
                <div class="feature-icon">üîÑ</div>
                <div class="feature-name">Auto-Rotate</div>
                <div class="feature-desc">Rotates between 3 embedded shows, never binging one.</div>
            </div>
            <div class="feature-item">
                <div class="feature-icon">‚ñ∂Ô∏è</div>
                <div class="feature-name">Embedded Playlist</div>
                <div class="feature-desc">Priority playlist pre-loaded - no selection needed.</div>
            </div>
            <div class="feature-item">
                <div class="feature-icon">üì∫</div>
                <div class="feature-name">Continuous Loop</div>
                <div class="feature-desc">Plays continuously rotating shows until you stop.</div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script>
        const priorityShows = [
            {
                name: "Love Songs Collection",
                videos: [
                    "/attached_assets/09.%20Nonstop%20Medley%20Love%20Songs%2080%27s%2090%27s%20Playlist%20-%20Best%20Slow%20Rock%20Love%20Song%20Nonstop_1763886740201.mp4",
                    "/attached_assets/18.%20Richard%20Marx%20-%20Right%20Here%20Waiting%20(Official%20Music%20Video)_1763886740201.mp4"
                ]
            },
            {
                name: "Classic Ballads",
                videos: [
                    "/attached_assets/Backstreet%20Boys%20-%20Drowning%20(Album%20Version)_1763886740202.mp3",
                    "/attached_assets/Bee%20Gees%20-%20How%20Deep%20Is%20Your%20Love_1763886740202.wma"
                ]
            },
            {
                name: "Rock Legends",
                videos: [
                    "/attached_assets/Chris%20Rea-%20The%20road%20to%20hell%20Lyrics_1763886740202.mp4",
                    "/attached_assets/09.%20Nonstop%20Medley%20Love%20Songs%2080%27s%2090%27s%20Playlist%20-%20Best%20Slow%20Rock%20Love%20Song%20Nonstop_1763886740201.mp4"
                ]
            }
        ];

        const player = document.getElementById('videoPlayer');
        const playBtn = document.getElementById('playBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const nextBtn = document.getElementById('nextBtn');
        const fullscreenBtn = document.getElementById('fullscreenBtn');
        const currentShowEl = document.getElementById('currentShow');
        const clipsPlayedEl = document.getElementById('clipsPlayed');
        const nextShowEl = document.getElementById('nextShowDisplay');
        const statusEl = document.getElementById('statusText');
        const loadingEl = document.getElementById('loadingIndicator');
        const errorEl = document.getElementById('errorIndicator');

        let clipsPlayed = 0;
        let currentShowIndex = 0;
        let isPlaying = false;
        let autoPlayTimer = null;

        // Show rotation (3 shows)
        const showRotation = [0, 1, 2];

        function loadRandomClip() {
            // Get next show in rotation
            const showIdx = showRotation[currentShowIndex % showRotation.length];
            const show = priorityShows[showIdx];
            
            // Pick random video from selected show
            const videoIdx = Math.floor(Math.random() * show.videos.length);
            const videoUrl = show.videos[videoIdx];

            // Update UI
            currentShowEl.textContent = show.name;
            clipsPlayed++;
            clipsPlayedEl.textContent = clipsPlayed;
            
            // Update next show
            const nextShowIdx = showRotation[(currentShowIndex + 1) % showRotation.length];
            nextShowEl.textContent = priorityShows[nextShowIdx].name;
            
            // Load video
            player.src = videoUrl;
            errorEl.style.display = 'none';
            loadingEl.style.display = 'flex';
            statusEl.textContent = `Playing: ${show.name} (Clip ${clipsPlayed})`;

            // Move to next show for next rotation
            currentShowIndex++;

            // Try to play
            if (isPlaying) {
                player.play().catch(e => console.log('Playback error:', e));
            }

            // Schedule next clip after 5 minutes
            scheduleNextClip();
        }

        function scheduleNextClip() {
            clearTimeout(autoPlayTimer);
            autoPlayTimer = setTimeout(() => {
                if (isPlaying) {
                    loadRandomClip();
                }
            }, 5 * 60 * 1000); // 5 minutes
        }

        // CONTROLS
        playBtn.addEventListener('click', () => {
            isPlaying = true;
            if (!player.src) {
                loadRandomClip();
            } else {
                player.play();
                statusEl.textContent = `Playing: ${currentShowEl.textContent}`;
            }
        });

        pauseBtn.addEventListener('click', () => {
            isPlaying = false;
            player.pause();
            statusEl.textContent = `Paused: ${currentShowEl.textContent}`;
            clearTimeout(autoPlayTimer);
        });

        nextBtn.addEventListener('click', () => {
            loadRandomClip();
        });

        fullscreenBtn.addEventListener('click', () => {
            const wrapper = player.parentElement;
            if (wrapper.requestFullscreen) {
                wrapper.requestFullscreen();
            }
        });

        // VIDEO EVENTS
        player.addEventListener('loadstart', () => {
            loadingEl.style.display = 'flex';
            errorEl.style.display = 'none';
        });

        player.addEventListener('canplay', () => {
            loadingEl.style.display = 'none';
            if (isPlaying) {
                player.play().catch(e => console.log('Play error:', e));
            }
        });

        player.addEventListener('ended', () => {
            if (isPlaying) {
                loadRandomClip();
            }
        });

        player.addEventListener('error', (e) => {
            console.error('Video error:', player.error);
            // Try next video immediately on error
            if (isPlaying) {
                loadingEl.style.display = 'flex';
                loadingEl.textContent = 'Loading next clip...';
                setTimeout(() => {
                    loadRandomClip();
                }, 1000);
            }
        });

        // Initialize
        currentShowEl.textContent = priorityShows[0].name;
        nextShowEl.textContent = priorityShows[1].name;
    </script>
</body>
</html>
